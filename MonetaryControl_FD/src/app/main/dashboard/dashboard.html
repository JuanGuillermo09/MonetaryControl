<mat-sidenav-container class="sidenav-container">
    <mat-sidenav #s mode="side" class="sidenav" fixedInViewport>
        <div class="brand">
            <mat-icon>dashboard</mat-icon>
            <span>MiPanel</span>
        </div>
        <mat-nav-list>
            <a mat-list-item href="#"><mat-icon>home</mat-icon>Inicio</a>
            <a mat-list-item href="#"><mat-icon>analytics</mat-icon>Reportes</a>
            <a mat-list-item
                href="#"><mat-icon>inventory_2</mat-icon>Inventario</a>
            <a mat-list-item href="#"><mat-icon>people</mat-icon>Usuarios</a>
            <a mat-list-item
                href="#"><mat-icon>settings</mat-icon>Configuración</a>
        </mat-nav-list>
        <div class="sidenav-footer">
            <button mat-button><mat-icon>logout</mat-icon>Salir</button>
        </div>
    </mat-sidenav>
    <mat-sidenav-content>
        <mat-toolbar color="primary" class="topbar">
            <button mat-icon-button (click)="s.toggle()" class="mobile-toggle">
                <mat-icon>menu</mat-icon>
            </button>
            <span class="title">Dashboard — Panel de control</span>

            <span class="spacer"></span>

            <button mat-icon-button [matMenuTriggerFor]="userMenu">
                <mat-icon>account_circle</mat-icon>
            </button>
            <mat-menu #userMenu="matMenu">
                <button mat-menu-item>Perfil</button>
                <button mat-menu-item>Preferencias</button>
                <button mat-menu-item>Salir</button>
            </mat-menu>
        </mat-toolbar>

        <div class="content">
            <!-- KPIs -->
            <div class="kpis">

                @for (k of kpis; track k.label) {
                <mat-card class="kpi-card">
                    <div class="kpi-left">
                        <mat-icon class="kpi-icon">{{k.icon}}</mat-icon>
                    </div>
                    <div class="kpi-right">
                        <div class="kpi-value">{{k.value}}</div>
                        <div class="kpi-label">{{k.label}}</div>
                    </div>
                </mat-card>
                } @empty {
                <li>There are no items.</li>
                }

            </div>

            <!-- Grid principal: gráficas y tabla -->
            <div class="main-grid">
                <mat-card class="chart-card">
                    <div class="card-header">Ventas (últimos 30 días)</div>
                    <div class="chart-placeholder">
                        <div class="chart-container">
                            <canvas #chartCanvas></canvas>
                        </div>
                    </div>
                </mat-card>

                <mat-card class="transactions-card">
                    <div class="card-header">Transacciones recientes</div>
                    <table mat-table [dataSource]="filteredRecent()"
                        class="mat-elevation-z1 simple-table">

                        <ng-container matColumnDef="date">
                            <th mat-header-cell *matHeaderCellDef>Fecha</th>
                            <td mat-cell *matCellDef="let r">{{ r.date |
                                date:'dd/MM/yyyy'}}</td>
                        </ng-container>

                        <ng-container matColumnDef="category">
                            <th mat-header-cell *matHeaderCellDef>Categoria</th>
                            <td mat-cell *matCellDef="let r">{{r.category}}</td>
                        </ng-container>

                        <ng-container matColumnDef="amount">
                            <th mat-header-cell *matHeaderCellDef>Monto</th>
                            <td mat-cell *matCellDef="let r">{{r.amount}}</td>
                        </ng-container>

                        <tr mat-header-row
                            *matHeaderRowDef="['date', 'category', 'amount']"></tr>
                        <tr mat-row
                            *matRowDef="let row; columns: ['date', 'category', 'amount'];"></tr>
                    </table>
                </mat-card>
            </div>
        </div>
    </mat-sidenav-content>
</mat-sidenav-container>